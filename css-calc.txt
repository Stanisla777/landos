if (windowWidth < 600) {
  // Принудительный reflow для точной ширины
  void tooltip.offsetWidth;

  const tooltipWidth = tooltip.offsetWidth || 256; // fallback
  const desiredLeft = windowWidth / 2 - tooltipWidth / 2;
  const offsetFromIcon = desiredLeft - rect.left;

  tooltip.style.left = offsetFromIcon + 'px';
  tooltip.style.right = 'auto';
  tooltip.style.transform = 'translateX(0)';
  tooltip.style.inset = 'unset';
}
