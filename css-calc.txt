Ğ”ĞµĞ¼Ğ¾-ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ Ñ Ğ²Ğ¸Ğ´ĞµĞ¾:
https://rssprosi-3100.sprosi.dev.ringsites.ahml.ru/education/video/testovoe-video-ot-vkvideo-ru/
https://rssprosi-3100.sprosi.dev.ringsites.ahml.ru/education/video/testovoe-video-ot-rutube-ru/

Ğ’Ğ¸Ğ´ĞµĞ¾ Ñ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼Ğ¸:

https://rssprosi-3100.sprosi.dev.ringsites.ahml.ru/education/video/sberezhenie-sredstv-v-krizisnoy-situatsii/

https://rssprosi-3100.sprosi.dev.ringsites.ahml.ru/education/video/keshbek-dlya-zhizni-kak-vernut-potrachennye-dengi/




 .card-video__icon-play {
    width: 96px;
    height: 96px;
    background-color: rgba(0, 0, 0, .5);
    border-radius: 50%;
    transition: background .2s, transform .2s;
    transition-timing-function: ease-out;
    will-change: background, transform;
    display: flex;
    align-items: center;
    justify-content: center;
}

.separate-video .card-video__icon-play:before {
    content: "";
    display: block;
    width: 48px;
    height: 48px;
    background-position: 50%;
    background-repeat: no-repeat;
    background-size: contain;
    background-image: url(data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' width='48' height='48' fill='%23fff' style='width:48px;height:48px'%3E%3Cpath d='M14.4 8.76l24.02 13.85a1.6 1.6 0 010 2.78L14.4 39.24a1.6 1.6 0 01-2.4-1.39v-27.7a1.6 1.6 0 012.4-1.39'/%3E%3C/svg%3E);
}

.card-video__prev:hover .card-video__icon-play {
    background-color: rgba(0, 0, 0, .6);
    transform: translate(-50%, -50%) scale(1.15);
}

<div class="card-video__icon-play"></div>


const beforeLoadEl = container.querySelector('.before-load');
if (beforeLoadEl) {
  beforeLoadEl.style.display = 'none';
}

videos[i].querySelector('.card-video__prev').onclick = function () {
  const container = videos[i];
  const type_video = container.getAttribute('for-category');

  // Ğ£Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ğ·Ğ°Ğ³Ğ»ÑƒÑˆĞºÑƒ (Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ¾Ğ¹ Ğ¾Ñ‚ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº)
  const picture = container.querySelector('picture');
  const playIcon = container.querySelector('.card-video__icon-play');
  if (picture) picture.style.display = 'none';
  if (playIcon) playIcon.style.display = 'none';

  // â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
  // Ğ¡Ğ»ÑƒÑ‡Ğ°Ğ¹ 1: Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ²Ğ¸Ğ´ĞµĞ¾ (<video>)
  // â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
  if (type_video === 'file') {
    const videoEl = container.querySelector('video');
    const sourceEl = container.querySelector('video source');
    const id_video = /* Ñƒ Ğ²Ğ°Ñ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¾ Ğ³Ğ´Ğµ-Ñ‚Ğ¾ Ğ²Ñ‹ÑˆĞµ */ /* Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: */ container.getAttribute('data-video-src');

    if (!sourceEl && videoEl && id_video) {
      const source = document.createElement('source');
      source.src = id_video;
      source.type = 'video/mp4';
      videoEl.appendChild(source);
    }

    if (videoEl) {
      videoEl.style.display = 'block';
      container.querySelector('.before-load')?.style.display = 'none';

      // ĞŸÑ€Ğ¾Ğ±ÑƒĞµĞ¼ Ğ²Ğ¾ÑĞ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²ĞµÑÑ‚Ğ¸ â€” Ğ² Ñ€Ğ°Ğ¼ĞºĞ°Ñ… user gesture (onclick), Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ ÑÑ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ
      videoEl.muted = true; // Ğ´Ğ»Ñ Ğ½Ğ°Ğ´Ñ‘Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ½Ğ° iOS
      videoEl.play().catch(err => {
        console.warn('Video play prevented:', err);
        // ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ "Play", ĞµÑĞ»Ğ¸ autoplay Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½
      });
    }
    return;
  }

  // â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
  // Ğ¡Ğ»ÑƒÑ‡Ğ°Ğ¹ 2: iframe (YouTube, VK, Rutube Ğ¸ Ğ´Ñ€.)
  // â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
  const iframe = container.querySelector('iframe');
  if (!iframe || iframe.hasAttribute('data-autoplay-applied')) return;

  try {
    const srcUrl = new URL(iframe.src);
    const hostname = srcUrl.hostname;

    // â€”â€”â€”â€” ĞĞ±Ñ‰Ğ¸Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ â€”â€”â€”â€”
    srcUrl.searchParams.set('autoplay', '1');
    srcUrl.searchParams.set('muted', '1');      // Rutube Ğ¸ VK
    srcUrl.searchParams.set('mute', '1');       // YouTube Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ `mute`, Ğ½Ğµ `muted`
    srcUrl.searchParams.set('playsinline', '1'); // ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ iOS

    // â€”â€”â€”â€” ĞŸĞ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ¾-ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸ĞºĞ° â€”â€”â€”â€”
    if (hostname.includes('youtube.com') || hostname.includes('youtu.be')) {
      // YouTube: Ğ½ÑƒĞ¶ĞµĞ½ enablejsapi Ğ´Ğ»Ñ postMessage (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾), Ğ½Ğ¾ autoplay + mute Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾
      srcUrl.searchParams.set('enablejsapi', '1');
    } else if (hostname.includes('rutube.ru')) {
      // Rutube: embed-ÑÑÑ‹Ğ»ĞºĞ° Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ° Ğ±Ñ‹Ñ‚ÑŒ Ğ²Ğ¸Ğ´Ğ° `/play/embed/ID/`
      // Ğ•ÑĞ»Ğ¸ Ñƒ Ğ²Ğ°Ñ `/video/ID/` â€” Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚Ğµ Ğ½Ğ° embed Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ Ğ¿Ñ€Ğ¸ Ğ²ÑÑ‚Ğ°Ğ²ĞºĞµ
      srcUrl.searchParams.set('start', '0');
    } else if (hostname.includes('vkvideo.ru')) {
      // VK: Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ ÑƒĞ¶Ğµ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ÑÑ‚, Ğ½Ğ¾ ÑƒĞ±ĞµĞ´Ğ¸Ğ¼ÑÑ, Ñ‡Ñ‚Ğ¾ Ğ½ĞµÑ‚ `hd=0` Ğ¸ Ñ‚.Ğ¿.
      srcUrl.searchParams.set('hd', '2');
    }

    // ğŸ” ĞŸĞµÑ€ĞµÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ iframe â€” Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ´Ğ»Ñ Rutube!
    const newIframe = document.createElement('iframe');
    newIframe.src = srcUrl.toString();
    newIframe.setAttribute('frameborder', '0');
    newIframe.setAttribute('allow', 'autoplay; fullscreen; picture-in-picture; encrypted-media; microphone');
    newIframe.setAttribute('allowfullscreen', 'true');
    newIframe.setAttribute('data-autoplay-applied', 'true');

    // ĞšĞ¾Ğ¿Ğ¸Ñ€ÑƒĞµĞ¼ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ñ‹, ĞµÑĞ»Ğ¸ Ğ·Ğ°Ğ´Ğ°Ğ½Ñ‹ Ğ¸Ğ½Ğ»Ğ°Ğ¹Ğ½Ğ¾Ğ²Ğ¾
    if (iframe.style.width)  newIframe.style.width  = iframe.style.width;
    if (iframe.style.height) newIframe.style.height = iframe.style.height;
    // Ğ˜Ğ»Ğ¸, ĞµÑĞ»Ğ¸ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ñ‹ Ğ·Ğ°Ğ´Ğ°Ğ½Ñ‹ Ğ² data-Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ğ°Ñ… Ğ¸Ğ»Ğ¸ CSS â€” Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ½Ğµ Ñ‚Ñ€Ğ¾Ğ³Ğ°Ñ‚ÑŒ

    // Ğ—Ğ°Ğ¼ĞµĞ½ÑĞµĞ¼ ÑÑ‚Ğ°Ñ€Ñ‹Ğ¹ iframe
    iframe.replaceWith(newIframe);

  } catch (err) {
    console.error('ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞµ iframe Ğº autoplay:', err);
  }
};










