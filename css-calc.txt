// tooltipMobile.js

import bodyLockMobileFilter from './redesign-site/body-lock-mobile-filter';
import bodyUnlockMobileFilter from './redesign-site/body-unlock-mobile-filter';

function openTooltipMobile() {
  const array_mobile_tooltip = document.querySelectorAll('.js--open-mobile-tooltip');
  for (let item of array_mobile_tooltip) {
    item.onclick = () => {
      const parent = item.closest('.js--tooltip-parent');
      if (parent) {
        parent.classList.add('active');
        bodyLockMobileFilter(parent);
      }
    };
  }
}

function closeTooltipMobile() {
  const array_mobile_tooltip_close = document.querySelectorAll('.js--close-mobile-tooltip');
  for (let item of array_mobile_tooltip_close) {
    item.onclick = () => {
      const parent = item.closest('.js--tooltip-parent');
      if (parent) {
        parent.classList.remove('active');
        bodyUnlockMobileFilter(parent);
      }
    };
  }
}

// ðŸ”¥ ÐÐžÐ’ÐÐ¯ Ð¤Ð£ÐÐšÐ¦Ð˜Ð¯: Ð·Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ Ð²ÑÐµ Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ðµ Ñ‚ÑƒÐ»Ñ‚Ð¸Ð¿Ñ‹
function closeAllMobileTooltips() {
  const activeParents = document.querySelectorAll('.js--tooltip-parent.active');
  activeParents.forEach(parent => {
    parent.classList.remove('active');
    bodyUnlockMobileFilter(parent);
  });
}

// ðŸ”¥ ÐÐžÐ’ÐÐ¯ Ð¤Ð£ÐÐšÐ¦Ð˜Ð¯: Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº Ñ€ÐµÑÐ°Ð¹Ð·Ð°
function handleResize() {
  // ÐŸÐ¾Ñ€Ð¾Ð³ Ð¸Ð· Ð²Ð°ÑˆÐ¸Ñ… Ð¼ÐµÐ´Ð¸Ð°Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²: 480px
  if (window.innerWidth > 480) {
    closeAllMobileTooltips();
  }
}

// Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð¸ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ
export default function tooltipMobile() {
  openTooltipMobile();
  closeTooltipMobile();

  // Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ ÑÐ»ÑƒÑˆÐ°Ñ‚ÐµÐ»ÑŒ Ñ€ÐµÑÐ°Ð¹Ð·Ð°
  window.addEventListener('resize', handleResize);

  // ÐžÐ¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾: ÑÑ€Ð°Ð·Ñƒ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ (Ð½Ð° ÑÐ»ÑƒÑ‡Ð°Ð¹, ÐµÑÐ»Ð¸ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð° Ð½Ð° Ð´ÐµÑÐºÑ‚Ð¾Ð¿Ðµ)
  if (window.innerWidth > 480) {
    closeAllMobileTooltips();
  }
}
