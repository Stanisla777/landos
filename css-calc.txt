export default {
  // ... остальные методы и свойства остаются без изменений
  
  methods: {
    async openModalMail(event) {
      if (this.hasAnswersChanged()) {
        this.pendingAction = { type: 'modal' };
        await this.sendResults();
      } else {
        this.showModal();
      }
    },
    
    showModal() {
      Storage.dispatch('ActionOpenModalMailStatus', true);
      this.AddClassBody();
    },
    
    async sendResults() {
      if (this.isSending) return;
      this.isSending = true;

      try {
        await this.sendingResult('result');
        this.lastSentAnswers = JSON.parse(JSON.stringify(this.answersToSand));
        await this.waitForAnswerLink();

        if (this.pendingAction) {
          const { type, payload } = this.pendingAction;

          if (type === 'open') {
            const link = this.answerLink[payload];
            if (link) {
              window.open(link, '_blank');
            }
          } else if (type === 'copy') {
            const link = this.answerLink.link;
            if (link) {
              this.copyLinkManually(link, payload);
            }
          } else if (type === 'modal') {
            this.showModal();
          }

          this.pendingAction = null;
        }
      } catch (error) {
        console.error('Ошибка при отправке результатов:', error);
      } finally {
        this.isSending = false;
      }
    },
    
    // ... остальные методы остаются без изменений
  }
}

----------------------------------

<template lang="pug">
  .select-list__wr-search
    .select-list__search-item(
      v-if="answerLink.hasOwnProperty('link')"
      :data-link="answerLink.link!==''?answerLink.link:''"
      @click="handleCopyClick"
    )
      .select-list__search-item-icon
      p Скопировать ссылку
    a.select-list__search-item(
      v-if="answerLink.hasOwnProperty('vk')"
      :href="answerLink.vk!==''?answerLink.vk:''"
      @click.prevent="handleLinkClick('vk')"
    )
      .select-list__search-item-icon
      p ВКонтакте
    a.select-list__search-item(
      v-if="answerLink.hasOwnProperty('tg')"
      :href="answerLink.tg!==''?answerLink.tg:''"
      @click.prevent="handleLinkClick('tg')"
    )
      .select-list__search-item-icon
      p Telegram
    a.select-list__search-item(
      v-if="answerLink.hasOwnProperty('wp')"
      :href="answerLink.wp!==''?answerLink.wp:''"
      @click.prevent="handleLinkClick('wp')"
    )
      .select-list__search-item-icon
        img(src="/dist/img/WhatsApp.svg")
      p WhatsApp
    .select-list__search-item(
      @click="openModalMail"
      v-if="answerLink.hasOwnProperty('link')"
    )
      .select-list__search-item-icon
      p Отправить на e-mail
</template>
