export function closeModal(id) {
  console.log('=== closeModal –≤—ã–∑–≤–∞–Ω–∞ –¥–ª—è id:', id);
  const modalWindow = document.getElementById(id);
  if (!modalWindow) return;

  if (modalWindow.querySelector('.js--stories-body-video video')) {
    modalWindow.querySelector('.js--stories-body-video video').pause();
  }

  const promice = new Promise((resolve) => {
    if (modalWindow.classList.contains('open')) {
      console.log('–ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É open');
      if (modalWindow.querySelector('.select-list__selection-window')) {
        modalWindow.querySelector('.select-list__selection-window').classList.remove('opacity');
        setTimeout(() => {
          modalWindow.classList.remove('open');
        }, 200);
      } else {
        modalWindow.classList.remove('open');
      }
    } else if (modalWindow.classList.contains('show')) {
      console.log('–ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É show');
      modalWindow.classList.remove('show');
    }

    console.log('–£–¥–∞–ª—è–µ–º –∫–ª–∞—Å—Å—ã –º–æ–¥–∞–ª–∫–∏ —Å body');
    document.body.classList.remove('modal-opened', 'body-modal-not-remove', 'body-modal-not-remove-else');

    // üîπ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–æ–≤–µ—Ä—è–µ–º, –æ—Ç–∫—Ä—ã—Ç–æ –ª–∏ –º–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é
    const mobileMenu = document.querySelector('.js--mobile-menu');
    const isMobileMenuOpen = mobileMenu && mobileMenu.classList.contains('active');
    console.log('–ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é –æ—Ç–∫—Ä—ã—Ç–æ?', isMobileMenuOpen);
    console.log('–ö–ª–∞—Å—Å—ã body –ø–µ—Ä–µ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º:', document.body.className);

    // üîπ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –£–±—Ä–∞–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ non-scroll-for-body
    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–∫—Ä–æ–ª–ª —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –º–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é –∑–∞–∫—Ä—ã—Ç–æ
    if (!isMobileMenuOpen && document.body.classList.contains('body-additional-class')) {
      console.log('–£—Å–ª–æ–≤–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∫—Ä–æ–ª–ª–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ, –≤—ã–∑—ã–≤–∞–µ–º RemoveClassBody');
      
      // –°–Ω–∞—á–∞–ª–∞ —É–±–∏—Ä–∞–µ–º non-scroll-for-body, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
      if (document.body.classList.contains('non-scroll-for-body')) {
        document.body.classList.remove('non-scroll-for-body');
      }
      
      RemoveClassBody();
    } else {
      console.log('–£—Å–ª–æ–≤–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∫—Ä–æ–ª–ª–∞ –ù–ï –≤—ã–ø–æ–ª–Ω–µ–Ω–æ');
      console.log('isMobileMenuOpen:', isMobileMenuOpen);
      console.log('body-additional-class:', document.body.classList.contains('body-additional-class'));
    }

    resolve();
  }).then(() =>
    new Promise((resolve) => {
      setTimeout(() => {
        resolve();
      }, 500);
    })
  );

  return promice;
}

-----------------------------------------------------------------

function safeCallRemoveClassBody() {
  console.log('–í—ã–∑–æ–≤ safeCallRemoveClassBody');
  
  // üîπ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ù–µ —É–±–∏—Ä–∞–µ–º non-scroll-for-body –∑–¥–µ—Å—å
  // document.body.classList.remove('non-scroll-for-body'); // –£–î–ê–õ–ò–¢–ï –≠–¢–£ –°–¢–†–û–ö–£
  
  if (typeof RemoveClassBody === 'function') {
    console.log('RemoveClassBody –Ω–∞–π–¥–µ–Ω–∞ –∫–∞–∫ –∏–º–ø–æ—Ä—Ç');
    RemoveClassBody();
  } else if (typeof window.RemoveClassBody === 'function') {
    console.log('RemoveClassBody –Ω–∞–π–¥–µ–Ω–∞ –≤ window');
    window.RemoveClassBody();
  } else {
    console.error('RemoveClassBody –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
  }
}
