{
  test: /\.(sass|scss)$/i,
  include: path.resolve(__dirname, 'src/scss'),
  use: [
    MiniCssExtractPlugin.loader,
    {
      loader: 'css-loader',
      options: {
        sourceMap: !isProduction,
        url: false // ← критично
      }
    },
    {
      loader: 'postcss-loader',
      options: {
        sourceMap: !isProduction,
        postcssOptions: {
          plugins: [
            require('cssnano')({
              preset: ['default', {
                discardComments: { removeAll: !isProduction } // true в prod, false в dev
              }]
            })
          ]
        }
      }
    },
    {
      loader: 'sass-loader',
      options: {
        sourceMap: !isProduction,
        implementation: require('sass')
      }
    }
  ]
}
