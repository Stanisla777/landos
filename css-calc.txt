function tooltipDoesNotFitInViewport(tooltip, windowWidth) {
  // Принудительно получить актуальные размеры
  void tooltip.offsetWidth;
  const rect = tooltip.getBoundingClientRect();
  return rect.left < 0 || rect.right > windowWidth;
}


if (windowWidth < 600) {
  if (tooltipDoesNotFitInViewport(tooltip, windowWidth)) {
    void tooltip.offsetWidth;
    tooltip.style.inset = 'unset';
    tooltip.style.transform = `translateX(${
      -((rect.left - tooltip.offsetWidth / 2 + 7) - (windowWidth / 2 - tooltip.offsetWidth / 2))
    }px)`;
    tooltip.classList.add('without-arrow');
  } else {
    tooltip.classList.remove('without-arrow');
  }
}
