npx webpack --config webpack.css.js --watch --mode development

npx webpack-dev-server --mode development --hot --config webpack.config.js

// plugins/vite-pug.js
import { compileFile } from 'pug';
import { resolve } from 'path';

// üîë –ü–æ–ª—É—á–∞–µ–º –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞ 1 —É—Ä–æ–≤–µ–Ω—å –≤—ã—à–µ plugins/)
const projectRoot = resolve(__dirname, '..');

export default function vitePugPlugin(options = {}) {
  const { basedir = 'src/pug' } = options;

  return {
    name: 'vite-pug',
    enforce: 'pre',
    transformIndexHtml: {
      order: 'pre',
      handler(html, ctx) {
        const pathname = ctx.path;
        if (pathname === '/' || pathname.endsWith('.html')) {
          const name = pathname === '/' ? 'index' : pathname.slice(1, -5);
          
          // ‚úÖ –ü—É—Ç—å –æ—Ç –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
          const pugPath = resolve(projectRoot, `src/pug/views/${name}.pug`);
          
          try {
            const fn = compileFile(pugPath, {
              // ‚úÖ basedir —Ç–æ–∂–µ –æ—Ç –∫–æ—Ä–Ω—è
              basedir: resolve(projectRoot, basedir),
              pretty: false,
            });
            return fn();
          } catch (err) {
            return `<h2>‚ö†Ô∏è Pug Error: ${name}.pug</h2><pre>${err.message}\n${err.stack}</pre>`;
          }
        }
        return html;
      }
    }
  };
}









