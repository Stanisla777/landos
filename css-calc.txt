Ð”ÐµÐ¼Ð¾-ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹ Ñ Ð²Ð¸Ð´ÐµÐ¾:
https://rssprosi-3100.sprosi.dev.ringsites.ahml.ru/education/video/testovoe-video-ot-vkvideo-ru/
https://rssprosi-3100.sprosi.dev.ringsites.ahml.ru/education/video/testovoe-video-ot-rutube-ru/

Ð’Ð¸Ð´ÐµÐ¾ Ñ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¼Ð¸ Ñ„Ð°Ð¹Ð»Ð°Ð¼Ð¸:

https://rssprosi-3100.sprosi.dev.ringsites.ahml.ru/education/video/sberezhenie-sredstv-v-krizisnoy-situatsii/

https://rssprosi-3100.sprosi.dev.ringsites.ahml.ru/education/video/keshbek-dlya-zhizni-kak-vernut-potrachennye-dengi/



https://t.me/share/url?url=https%3A%2F%2Fxn--h1alcedd.xn--d1aqf.xn--p1ai&text=%D0%9A%D0%B0%D0%BA%D0%BE%D0%B9-%D1%82%D0%BE%20%D1%82%D0%B5%D0%BA%D1%81%D1%82&utm_source=share2



------------------------------------------------------------------------------------------------------------------

/* eslint-disable */
import AddClassBody from './redesign-site/disallow-body-scrolling';
import RemoveClassBody from './redesign-site/allow-body-scrolling';
// Ð“Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ
let activeDropdown = null;
let activeTrigger = null;
let popupContainer = null;
const defaultType = '1';

const dropdownCache = new WeakMap();

// ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ð¾Ð³Ð¾/Ð¿Ð»Ð°Ð½ÑˆÐµÑ‚Ð½Ð¾Ð³Ð¾ ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð° Ð¿Ð¾ User-Agent
function isMobileDevice() {
  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
}


// Ð¡Ð¾Ð·Ð´Ð°Ñ‘Ð¼ Ð¾Ð±Ñ‰Ð¸Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ Ð¾Ð´Ð¸Ð½ Ñ€Ð°Ð·
function ensurePopupContainer() {
  if (!popupContainer) {
    popupContainer = document.createElement('div');
    popupContainer.className = 'soc-share-popup-container';
    Object.assign(popupContainer.style, {
      position: 'fixed',
      top: '0',
      left: '0',
      width: '100%',
      height: '100%',
      pointerEvents: 'none',
      zIndex: '2147483647', // ÐºÐ°Ðº Ñƒ Ð¯Ð½Ð´ÐµÐºÑÐ° â€” Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹
    });
    document.body.appendChild(popupContainer);
  }
  return popupContainer;
}


// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº ÐºÐ»Ð¸ÐºÐ°
function handleShareClick(e) {
  e.preventDefault();
  const trigger = e.currentTarget;
  const wrapper = trigger.closest('.js--soc-list-wrapper-share');
  if (!wrapper) return;

  // Ð—Ð°ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ð¹ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¹ popup (ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ)
  if (activeDropdown) {
    hideDropdown(activeDropdown);
  }

  // âœ… Ð˜Ñ‰ÐµÐ¼ popup Ð² ÐºÑÑˆÐµ Ð¿Ð¾ wrapper
  let dropdown = dropdownCache.get(wrapper);
  if (!dropdown) {
    // Ð¡Ð¾Ð·Ð´Ð°Ñ‘Ð¼ popup Ð²Ð¿ÐµÑ€Ð²Ñ‹Ðµ Ð´Ð»Ñ ÑÑ‚Ð¾Ð¹ ÐºÐ½Ð¾Ð¿ÐºÐ¸
    dropdown = createShareDropdown(wrapper);
    // Ð’ÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼ Ð² Ð³Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ñ‹Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€
    ensurePopupContainer().appendChild(dropdown);
    // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² ÐºÑÑˆ (WeakMap â€” Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾)
    dropdownCache.set(wrapper, dropdown);
  }

  // ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ popup Ð¿Ð¾Ð´ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ ÐºÐ½Ð¾Ð¿ÐºÐ¾Ð¹
  showDropdown(dropdown, trigger);

  let data_id=0;
  if (wrapper.hasAttribute('data-id')) {
    data_id = wrapper.getAttribute('data-id')
  }
  console.log(data_id);
  let data_el_type = 0
  if (wrapper.hasAttribute('data-el-type')) {
    data_el_type = wrapper.getAttribute('data-el-type')
  }

  let count_share = 0
  if (wrapper.querySelector('.js-likes-share')) {
    count_share = parseInt(wrapper.querySelector('.js-likes-share').textContent)
  }
  let element_count;
  if (wrapper.querySelector('.js-likes-share')) {
    element_count = wrapper.querySelector('.js-likes-share')
  }

  shareAjax(data_id,data_el_type,element_count,count_share)


}

//Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ…
function shareAjax(id, type = defaultType,element_count, count){
  console.log('id');
  console.log(id);
  console.log('type');
  console.log(type);
  if (element_count!==undefined) {
    element_count.textContent = count+1
  }

}

// ÐŸÐ¾ÐºÐ°Ð· popupâ€™Ð°
function showDropdown(dropdown, trigger) {
  dropdown.style.display = 'block';
  dropdown.style.opacity = '0';
  dropdown.style.pointerEvents = 'none';

  const isMobilePortrait = isMobileDevice() && window.matchMedia('(max-width: 480px)').matches;

  // ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ð¾Ð½Ð¸Ñ€ÑƒÐµÐ¼ (Ð´Ð»Ñ Ð´ÐµÑÐºÑ‚Ð¾Ð¿Ð° â€” Ð¿Ð¾Ð´ ÐºÐ½Ð¾Ð¿ÐºÐ¾Ð¹)
  positionDropdown(trigger, dropdown);

  requestAnimationFrame(() => {
    // Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð³Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ñ‹Ð¹ active
    if (popupContainer) {
      popupContainer.classList.add('active');
    }

    // âœ… Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° ÑÐ½Ð¸Ð¼Ð°ÐµÐ¼ .active â€” ÑƒÑ…Ð¾Ð´Ð¸Ð¼ Ð² Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ (Ð·Ð° ÑÐºÑ€Ð°Ð½Ð¾Ð¼)
    dropdown.classList.remove('active');

    requestAnimationFrame(() => {
      // âœ… Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð²ÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ transition Ð¸ Ð°ÐºÑ‚Ð¸Ð²Ð¸Ñ€ÑƒÐµÐ¼
      if (isMobilePortrait) {
        dropdown.style.transition = 'transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
      } else {
        dropdown.style.transition = 'opacity 0.2s ease';
      }

      // Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ ÐºÐ»Ð°ÑÑÑ‹
      dropdown.classList.add('active');

      if (isMobileDevice()) {
        AddClassBody();
        if (popupContainer) popupContainer.classList.add('mobile-share');
        dropdown.classList.add('mobile-share');
      }

      // ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼
      dropdown.style.opacity = '1';
      dropdown.style.pointerEvents = 'auto';
    });
  });

  activeDropdown = dropdown;
  activeTrigger = trigger;
  if (!isMobileDevice()) {
    window.addEventListener('scroll', onScroll, { passive: true });
  }
}

// Ð¡ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ popupâ€™Ð°
function hideDropdown(dropdown) {
  if (!dropdown) return;

  const isMobilePortrait = isMobileDevice() && window.matchMedia('(max-width: 480px)').matches;

  // âœ… 1. Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ñ€Ð°Ð·Ñ€ÐµÑˆÐ°ÐµÐ¼ Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸ÑŽ
  dropdown.style.pointerEvents = 'none';
  // dropdown.style.opacity = '0';

  if (isMobilePortrait) {
    // âœ… Ð’ÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ transition Ð”Ðž Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ ÐºÐ»Ð°ÑÑÐ°
    dropdown.style.transition = 'transform 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
  } else {
    dropdown.style.transition = 'opacity 0.2s ease';
  }

  // âœ… 2. Ð£Ð±Ð¸Ñ€Ð°ÐµÐ¼ .active â†’ CSS Ð¿Ñ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ transform: translate(-50%, 101%)
  dropdown.classList.remove('active');

  // âœ… 3. Ð–Ð´Ñ‘Ð¼ Ð¾ÐºÐ¾Ð½Ñ‡Ð°Ð½Ð¸Ñ Ð°Ð½Ð¸Ð¼Ð°Ñ†Ð¸Ð¸, Ð¢ÐžÐ›Ð¬ÐšÐž Ð¿Ð¾Ñ‚Ð¾Ð¼ ÑÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼
  setTimeout(() => {
    dropdown.style.display = 'none';
    dropdown.style.transition = ''; // ÑÐ±Ñ€Ð¾Ñ

    // ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° ÐºÐ»Ð°ÑÑÐ¾Ð²
    if (popupContainer) popupContainer.classList.remove('active');
    if (dropdown.classList.contains('mobile-share')) {
      RemoveClassBody();
      if (popupContainer) popupContainer.classList.remove('mobile-share');
      dropdown.classList.remove('mobile-share');
    }
  }, isMobilePortrait ? 250 : 200); // â‰ˆ Ð´Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ transition

  activeDropdown = null;
  activeTrigger = null;
  window.removeEventListener('scroll', onScroll);
}

// ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ popupâ€™Ð° (Ð¼Ð³Ð½Ð¾Ð²ÐµÐ½Ð½Ð¾, Ð±ÐµÐ· transition!)
function positionDropdown(trigger, dropdown) {
  const rect = trigger.getBoundingClientRect();
  const top = rect.top + rect.height + 10; // Ð¾Ñ‚ÑÑ‚ÑƒÐ¿ 10px
  const left = rect.left;

  // ðŸ”‘ Ð¢Ð¾Ð»ÑŒÐºÐ¾ transform â€” Ð±ÐµÐ· top/left, Ð±ÐµÐ· transition
  dropdown.style.transform = `translate(${left}px, ${top}px)`;
}

// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº ÑÐºÑ€Ð¾Ð»Ð»Ð° â€” Ð¼Ð³Ð½Ð¾Ð²ÐµÐ½Ð½Ñ‹Ð¹, ÐºÐ°Ðº Ñƒ Ð¯Ð½Ð´ÐµÐºÑÐ°
function onScroll() {
  if (activeDropdown && activeTrigger) {
    positionDropdown(activeTrigger, activeDropdown);
  }
}

// Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ popupâ€™Ð° (Ð²Ð½ÑƒÑ‚Ñ€Ð¸ fixed-ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð°)
function createShareDropdown(wrapper) {
  const servicesStr = (wrapper.dataset.services || '').trim();
  let services = [];
  if (servicesStr) {
    try {
      services = JSON.parse(servicesStr);
    } catch (_) {
      let cleaned = servicesStr.trim();
      if (cleaned.startsWith('[') && cleaned.endsWith(']')) {
        cleaned = cleaned.slice(1, -1).trim();
      }
      services = cleaned.split(',').map(s => s.trim()).filter(Boolean);
    }
  }
  if (!Array.isArray(services)) services = [];

  const rawUrl = wrapper.dataset.url || location.href;
  const rawText = wrapper.dataset.text || document.title;
  const rawImage = wrapper.dataset.image || '';

  const dropdown = document.createElement('div');
  dropdown.className = 'soc-list__share';
  Object.assign(dropdown.style, {
    opacity: '0',
    pointerEvents: 'none',
  });

  // âœ… ÐœÐ¾Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ñ…ÐµÐ´ÐµÑ€
  const mobileHeader = document.createElement('div');
  mobileHeader.className = 'soc-list__mobile-header';

  const urlText = document.createElement('p');
  urlText.textContent = rawText; // â† URL Ð² Ñ…ÐµÐ´ÐµÑ€Ðµ

  const closeBtn = document.createElement('div');
  closeBtn.className = 'soc-list__mobile-header-close js--soc-list-mobile-header-close';

  const closeIcon = document.createElement('div');
  closeIcon.className = 'soc-list__mobile-header-close-icon';

  closeBtn.appendChild(closeIcon);
  mobileHeader.appendChild(urlText);
  mobileHeader.appendChild(closeBtn);

  closeBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    hideDropdown(dropdown);
  });

  dropdown.appendChild(mobileHeader);

  // Ð¡Ð¿Ð¸ÑÐ¾Ðº ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
  const ul = document.createElement('ul');
  const serviceTitles = {
    whatsapp: 'WhatsApp',
    telegram: 'Telegram',
    vkontakte: 'Ð’ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ðµ',
    odnoklassniki: 'ÐžÐ´Ð½Ð¾ÐºÐ»Ð°ÑÑÐ½Ð¸ÐºÐ¸',
  };

  services.forEach(service => {
    const title = serviceTitles[service];
    if (!title) return;

    const li = document.createElement('li');
    const item = document.createElement('div');
    item.className = 'soc-list__share-item';

    const icon = document.createElement('div');
    icon.className = `soc-list__share-icon ${service}-icon-share`;

    const span = document.createElement('span');
    span.className = 'soc-list__share-title';
    span.textContent = title;

    item.appendChild(icon);
    item.appendChild(span);
    li.appendChild(item);

    item.addEventListener('click', (ev) => {
      ev.stopPropagation();
      const shareUrl = getShareUrl(service, { rawUrl, rawText, rawImage });
      window.open(shareUrl, '_blank', 'width=600,height=500,scrollbars=yes,resizable=yes');
      hideDropdown(dropdown);
    });

    ul.appendChild(li);
  });

  // ÐšÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ
  const copyLi = document.createElement('li');
  const copyDiv = document.createElement('div');
  copyDiv.className = 'soc-list__copy-link';

  const copyIcon = document.createElement('div');
  copyIcon.className = 'soc-list__share-icon copy-link';

  const copyTitle = document.createElement('span');
  copyTitle.className = 'soc-list__share-title';
  copyTitle.textContent = 'Ð¡ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÑÑ‹Ð»ÐºÑƒ';

  copyDiv.appendChild(copyIcon);
  copyDiv.appendChild(copyTitle);
  copyLi.appendChild(copyDiv);
  ul.appendChild(copyLi);

  dropdown.appendChild(ul);

  // ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
  copyDiv.addEventListener('click', function (ev) {
    ev.stopPropagation();
    const copy = () => {
      if (navigator.clipboard && typeof navigator.clipboard.writeText === 'function') {
        return navigator.clipboard.writeText(rawUrl);
      } else {
        const textarea = document.createElement('textarea');
        textarea.value = rawUrl;
        textarea.setAttribute('readonly', '');
        textarea.style.position = 'absolute';
        textarea.style.left = '-9999px';
        document.body.appendChild(textarea);
        textarea.select();
        const ok = document.execCommand('copy');
        document.body.removeChild(textarea);
        return ok ? Promise.resolve() : Promise.reject(new Error('copy failed'));
      }
    };

    copy()
      .then(() => {
        copyTitle.textContent = 'Ð¡ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾';
        setTimeout(() => {
          if (activeDropdown === dropdown) {
            hideDropdown(dropdown);
          }
        }, 500);
      })
      .catch(err => {
        console.warn('ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ:', err);
        copyTitle.textContent = 'ÐžÑˆÐ¸Ð±ÐºÐ°';
        setTimeout(() => {
          if (copyTitle.textContent === 'ÐžÑˆÐ¸Ð±ÐºÐ°') {
            copyTitle.textContent = 'Ð¡ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÑÑ‹Ð»ÐºÑƒ';
          }
        }, 1500);
      });
  });

  // âœ… Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð¿Ð¾ ÐºÐ»Ð¸ÐºÑƒ Ð²Ð½Ðµ â€” Ñ Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¾Ð¹ Ð¢ÐžÐ›Ð¬ÐšÐž Ð½Ð° Ð¼Ð¾Ð±Ð¸Ð»ÐºÐµ
  const onClickOutside = (ev) => {
    if (!activeDropdown || activeDropdown !== dropdown) return;

    const clickedInside = dropdown.contains(ev.target) ||
      ev.target.closest('.js--soc-list-share');
    if (clickedInside) return;

    // Ð—Ð°ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼ popup
    hideDropdown(dropdown);

    // âœ… ÐÐ° Ð’Ð¡Ð•Ð¥ ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ð°Ñ…: ÐµÑÐ»Ð¸ ÐºÐ»Ð¸Ðº Ð¿Ð¾ ÑÑÑ‹Ð»ÐºÐµ â€” Ð½Ðµ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼
    const clickedOnLink = ev.target.closest('a[href]');
    if (clickedOnLink) {
      ev.stopPropagation();
      ev.preventDefault();
    }
    // Ð•ÑÐ»Ð¸ Ð½Ðµ ÑÑÑ‹Ð»ÐºÐ° â€” ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ðµ Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ Ð²ÑÐ¿Ð»Ñ‹Ñ‚Ð¸Ðµ (Ð¾Ñ‚ÐºÑ€Ð¾ÐµÑ‚ÑÑ Ð´Ñ€ÑƒÐ³Ð¾Ð¹ popup Ð¸ Ñ‚.Ð´.)
  };
  document.addEventListener('click', onClickOutside);

  dropdown._cleanup = () => {
    document.removeEventListener('click', onClickOutside);
  };

  return dropdown;
}

// Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ share-ÑÑÑ‹Ð»Ð¾Ðº
function getShareUrl(service, { rawUrl, rawText, rawImage }) {
  const url = encodeURIComponent(rawUrl);
  const text = encodeURIComponent(rawText);
  const image = encodeURIComponent(rawImage);

  switch (service) {
    case 'whatsapp':
      return `https://api.whatsapp.com/send?text=${text} ${url}&utm_source=share2`;
    case 'telegram':
      return `https://t.me/share/url?url=${url}&text=${text}&utm_source=share2`;
    case 'vkontakte':
      return `https://vk.com/share.php?url=${url}&title=${text}&image=${image}&noparse=true&utm_source=share2`;
    case 'odnoklassniki':
      return `https://connect.ok.ru/offer?url=${url}&title=${text}&imageUrl=${image}&utm_source=share2`;
    default:
      return '#';
  }
}

// Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ ÐºÐ½Ð¾Ð¿Ð¾Ðº
export default function shareSocList() {
  const triggers = document.querySelectorAll('.js--soc-list-share:not([data-initialized])');
  triggers.forEach(trigger => {
    trigger.dataset.initialized = 'true';
    trigger.addEventListener('click', handleShareClick);
  });
}




