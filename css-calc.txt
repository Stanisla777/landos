// index.js
import TelegramBlock from './modules/TelegramBlock.vue';

// Глобальная функция для повторной инициализации
function initTelegramBlockIfNeeded() {
  const el = document.getElementById('telegram-block');
  if (el && !el.__vue_initialized) {
    new Vue({
      el: '#telegram-block',
      components: { 'telegram-block': TelegramBlock }
    });
    el.__vue_initialized = true;
  }
}

// Делаем доступной извне (для бэкенда)
window.initTelegramBlockIfNeeded = initTelegramBlockIfNeeded;

document.addEventListener('DOMContentLoaded', () => {
  // ... остальной код ...

  // Инициализируем сразу, если элемент уже есть
  initTelegramBlockIfNeeded();

  // ... остальные waitForVueApp ...
});

------------------------------------------------

// general.js
import TelegramBlock from './modules/TelegramBlock.vue';

function initTelegramBlockIfNeeded() {
  const el = document.getElementById('telegram-block');
  if (el && !el.__vue_initialized) {
    new Vue({
      el: '#telegram-block',
      components: { 'telegram-block': TelegramBlock }
    });
    el.__vue_initialized = true;
  }
}

window.initTelegramBlockIfNeeded = initTelegramBlockIfNeeded;

document.addEventListener('DOMContentLoaded', () => {
  // ... остальной код ...
  initTelegramBlockIfNeeded();
  // ... остальное ...
});
