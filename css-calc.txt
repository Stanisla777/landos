// Скрытие тултипа
function hideTooltip(tooltip) {
  if (!tooltip) return;

  if (tooltipCloseTimer) {
    clearTimeout(tooltipCloseTimer);
    tooltipCloseTimer = null;
  }

  const isNarrow = window.matchMedia('(max-width: 480px)').matches;
  const isMobile = isMobilePhone() || isNarrow;

  // === Устанавливаем переход ТОЛЬКО для мобильных ===
  if (isMobile) {
    tooltip.style.transition = 'transform 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
  } else {
    // Для десктопа убираем переход и удаляем мгновенно
    tooltip.style.transition = 'none';
  }

  tooltip.style.pointerEvents = 'none';

  // === Устанавливаем прозрачность ТОЛЬКО для десктопа ===
  if (!isMobile) {
    tooltip.style.opacity = '0';
  }

  // Удаляем активный класс
  tooltip.classList.remove('active');

  // === Таймаут: 300мс для мобильных, 0мс для десктопа ===
  setTimeout(() => {
    if (tooltip.parentNode) {
      tooltip.parentNode.removeChild(tooltip);

      if (!tooltipContainer.querySelector('.content-note__text-new')) {
        tooltipContainer.classList.remove('active');
        tooltipContainer.classList.remove('mobile-tooltip');
      }
    }

    if (isMobileDevice()) {
      removeClassBody();
    }
  }, isMobile ? 300 : 0);

  activeTooltip = null;
  activeTrigger = null;
}
