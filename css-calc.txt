createSheduleBlocks() {
  const blocks = [];
  const totalItems = this.shedule.length;

  // Сначала создаем все блоки без отступов
  const allBlocks = [];
  
  this.shedule.forEach((item, index) => {
    const hasNextItem = index < totalItems - 1;
    const nextItem = hasNextItem ? this.shedule[index + 1] : null;

    if (item.isHoliday) {
      // === ИПОТЕЧНЫЕ КАНИКУЛЫ ===
      let holidayCounter = 0;
      for (let i = index; i >= 0 && this.shedule[i].isHoliday; i--) {
        holidayCounter++;
      }

      const blockHeight = holidayCounter === 1 ? 60 : 41;
      const contentWidth = 515 - 16 - 16;
      const badgeHeight = this.converPx(20);

      allBlocks.push({
        type: 'holiday',
        content: {
          stack: [
            {
              canvas: [
                {
                  type: 'rect',
                  x: 0,
                  y: 0,
                  w: contentWidth,
                  r: 8,
                  h: blockHeight,
                  color: '#f4f4f4'
                }
              ],
              margin: [0, 0, 0, -blockHeight]
            },
            {
              stack: [
                ...(holidayCounter === 1 ? [
                  {
                    stack: [
                      {
                        canvas: [
                          {
                            type: 'rect',
                            x: 0,
                            y: 0,
                            w: this.converPx(135),
                            h: badgeHeight,
                            r: 4,
                            color: '#252628'
                          }
                        ],
                        margin: [0, 0, 0, -badgeHeight]
                      },
                      {
                        text: 'Ипотечные каникулы',
                        style: 'holidayBadgeText',
                        margin: [this.converPx(8), 4, this.converPx(8), 3]
                      }
                    ],
                    margin: [this.converPx(16), 0, this.converPx(16), this.converPx(11)]
                  }
                ] : []),
                {
                  columns: [
                    {
                      width: 120,
                      stack: [
                        {
                          text: `${this.$options.filters.capitalize(item.nameMonth)} ${item.year}`,
                          style: 'sheduleItemValueDate'
                        }
                      ]
                    },
                    {
                      width: contentWidth - 120,
                      stack: [{ text: '0', style: 'holidayValue' }]
                    }
                  ],
                  margin: [this.converPx(16), holidayCounter === 1 ? 0 : 4, 16, this.converPx(11)]
                }
              ],
              margin: [0, this.converPx(16), 0, this.converPx(16)]
            }
          ],
          unbreakable: true,
          margin: [0, 0, 0, 0]
        },
        hasNext: hasNextItem,
        nextIsHoliday: nextItem && nextItem.isHoliday,
        nextIsEarlyRepayment: nextItem && nextItem.prepayments && nextItem.prepayments.length > 0
      });

    } else {
      // === ОБЫЧНЫЙ ПЛАТЕЖ ===
      allBlocks.push({
        type: 'standard',
        content: this.createStandardPaymentBlock(item, false),
        hasNext: hasNextItem,
        nextIsHoliday: nextItem && nextItem.isHoliday,
        nextIsEarlyRepayment: nextItem && nextItem.prepayments && nextItem.prepayments.length > 0
      });

      // === ДОСРОЧНЫЕ ПОГАШЕНИЯ ===
      if (item.prepayments && item.prepayments.length > 0) {
        item.prepayments.forEach((product, prepayIndex) => {
          if (String(product.amount).toLowerCase().includes('e')) return;

          const isLastPrepayment = prepayIndex === item.prepayments.length - 1;
          
          allBlocks.push({
            type: 'early',
            content: this.createEarlyRepaymentBlock(product),
            hasNext: hasNextItem || !isLastPrepayment,
            nextIsHoliday: isLastPrepayment ? (nextItem && nextItem.isHoliday) : false,
            nextIsEarlyRepayment: !isLastPrepayment || (nextItem && nextItem.prepayments && nextItem.prepayments.length > 0)
          });
        });
      }
    }
  });

  // Теперь добавляем блоки с правильными отступами
  allBlocks.forEach((block, index) => {
    blocks.push(block.content);

    // Добавляем отступы между блоками
    if (block.hasNext) {
      const shouldAddLine = 
        // После обычного платежа идет обычный, досрочное или каникулы
        (block.type === 'standard') ||
        // После досрочного идет обычный платеж
        (block.type === 'early' && !block.nextIsHoliday && !block.nextIsEarlyRepayment) ||
        // После каникул идет обычный платеж
        (block.type === 'holiday' && !block.nextIsHoliday && !block.nextIsEarlyRepayment);

      const shouldAddOnlyMargin = 
        // Между двумя досрочными
        (block.type === 'early' && block.nextIsEarlyRepayment) ||
        // После досрочного идет каникулы
        (block.type === 'early' && block.nextIsHoliday) ||
        // После каникул идет досрочное
        (block.type === 'holiday' && block.nextIsEarlyRepayment);

      if (shouldAddLine) {
        // Линия с отступами 12px сверху и снизу = 24px
        blocks.push({
          canvas: [
            {
              type: 'line',
              x1: this.converPx(16),
              y1: 0,
              x2: 515 - 16 - 16,
              y2: 0,
              lineWidth: 1,
              lineColor: '#f4f4f4'
            }
          ],
          margin: [0, this.converPx(12), 0, this.converPx(12)]
        });
      } else if (shouldAddOnlyMargin) {
        // Только отступ 12px без линии
        blocks.push({
          text: '',
          margin: [0, 0, 0, this.converPx(12)]
        });
      }
    }
  });

  return { stack: blocks };
},

-------------------------------

