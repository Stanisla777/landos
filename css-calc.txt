createSheduleBlocks() {
  const blocks = [];
  const totalItems = this.shedule.length;
  let prevBlockType = null; // 'payment' | 'early' | 'holiday'

  this.shedule.forEach((item, index) => {
    const hasNextItem = index < totalItems - 1;

    if (item.isHoliday) {
      // === Ð˜ÐŸÐžÐ¢Ð•Ð§ÐÐ«Ð• ÐšÐÐÐ˜ÐšÐ£Ð›Ð« ===
      let holidayCounter = 0;
      for (let i = index; i >= 0 && this.shedule[i].isHoliday; i--) {
        holidayCounter++;
      }

      const blockHeight = holidayCounter === 1 ? 60 : 39;
      const contentWidth = 515 - this.converPx(16) - this.converPx(16);
      const badgeHeight = this.converPx(20);

      const isLastHolidayBlock = (index === totalItems - 1) || (!this.shedule[index + 1].isHoliday);

      blocks.push({
        stack: [
          {
            canvas: [
              {
                type: 'rect',
                x: 0,
                y: 0,
                w: contentWidth,
                r: 8,
                h: blockHeight,
                color: '#f4f4f4'
              }
            ],
            margin: [0, 0, 0, -blockHeight]
          },
          {
            stack: [
              ...(holidayCounter === 1 ? [
                {
                  stack: [
                    {
                      canvas: [
                        {
                          type: 'rect',
                          x: 0,
                          y: 0,
                          w: this.converPx(135),
                          h: badgeHeight,
                          r: 4,
                          color: '#252628'
                        }
                      ],
                      margin: [0, 0, 0, -badgeHeight]
                    },
                    {
                      text: 'Ð˜Ð¿Ð¾Ñ‚ÐµÑ‡Ð½Ñ‹Ðµ ÐºÐ°Ð½Ð¸ÐºÑƒÐ»Ñ‹',
                      style: 'holidayBadgeText',
                      margin: [this.converPx(8), 4, this.converPx(8), 3]
                    }
                  ],
                  margin: [this.converPx(16), 0, this.converPx(16), this.converPx(11)]
                }
              ] : []),
              {
                columns: [
                  {
                    width: 120,
                    stack: [
                      {
                        text: `${this.$options.filters.capitalize(item.nameMonth)} ${item.year}`,
                        style: 'sheduleItemValueDate'
                      }
                    ]
                  },
                  {
                    width: contentWidth - 120,
                    stack: [{ text: '0', style: 'holidayValue' }]
                  }
                ],
                margin: [this.converPx(16), 0, 16, this.converPx(11)]
              }
            ],
            margin: [0, this.converPx(16), 0, this.converPx(16)]
          }
        ],
        unbreakable: true,
        margin: [0, 0, 0, 0]
      });

      prevBlockType = 'holiday';

      // ÐŸÐ¾ÑÐ»Ðµ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ³Ð¾ Ð±Ð»Ð¾ÐºÐ° ÐºÐ°Ð½Ð¸ÐºÑƒÐ» â€” Ð¾Ñ‚ÑÑ‚ÑƒÐ¿ 12px (ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ Ð±Ð»Ð¾Ðº)
      if (isLastHolidayBlock && hasNextItem) {
        blocks.push({ text: '', margin: [0, 0, 0, this.converPx(12)] });
      }

    } else {
      // === ÐžÐ‘Ð«Ð§ÐÐ«Ð™ ÐŸÐ›ÐÐ¢ÐÐ– (+ Ð´Ð¾ÑÑ€Ð¾Ñ‡Ð½Ñ‹Ðµ Ð²Ð½ÑƒÑ‚Ñ€Ð¸) ===

      // ðŸ”¹ ÐšÐ¾Ð½Ñ‚ÐµÐºÑÑ‚: Ð½ÑƒÐ¶Ð½Ð° Ð»Ð¸ Ð»Ð¸Ð½Ð¸Ñ Ð¿ÐµÑ€ÐµÐ´ ÑÑ‚Ð¸Ð¼ Ð¿Ð»Ð°Ñ‚Ñ‘Ð¶Ð½Ñ‹Ð¼ Ð±Ð»Ð¾ÐºÐ¾Ð¼?
      if (prevBlockType === 'early' || prevBlockType === 'holiday') {
        // Ð›Ð¸Ð½Ð¸Ñ + ÑÑƒÐ¼Ð¼Ð°Ñ€Ð½Ð¾ 24px Ð¾Ñ‚ÑÑ‚ÑƒÐ¿Ð° (12px Ð´Ð¾ + 12px Ð¿Ð¾ÑÐ»Ðµ)
        blocks.push({
          canvas: [
            {
              type: 'line',
              x1: this.converPx(16),
              y1: 0,
              x2: 515 - this.converPx(16) - this.converPx(16),
              y2: 0,
              lineWidth: 1,
              lineColor: '#f4f4f4'
            }
          ],
          margin: [0, this.converPx(12), 0, this.converPx(12)]
        });
      } else if (blocks.length > 0) {
        // ÐœÐµÐ¶Ð´Ñƒ Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ð¼Ð¸ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð°Ð¼Ð¸ â€” Ð¾Ñ‚ÑÑ‚ÑƒÐ¿ 12px
        blocks.push({ text: '', margin: [0, 0, 0, this.converPx(12)] });
      }

      // Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ ÑÐ°Ð¼ Ð¿Ð»Ð°Ñ‚Ñ‘Ð¶
      blocks.push(this.createStandardPaymentBlock(item));
      prevBlockType = 'payment';

      // ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð´Ð¾ÑÑ€Ð¾Ñ‡Ð½Ñ‹Ñ… Ð¿Ð¾Ð³Ð°ÑˆÐµÐ½Ð¸Ð¹ (ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ)
      if (item.prepayments && item.prepayments.length > 0) {
        for (let i = 0; i < item.prepayments.length; i++) {
          const product = item.prepayments[i];
          if (String(product.amount).toLowerCase().includes('e')) continue;

          blocks.push(this.createEarlyRepaymentBlock(product));
          prevBlockType = 'early';

          // ÐŸÐ¾ÑÐ»Ðµ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð´Ð¾ÑÑ€Ð¾Ñ‡Ð½Ð¾Ð³Ð¾ â€” Ð¾Ñ‚ÑÑ‚ÑƒÐ¿ 12px, ÐµÑÐ»Ð¸ ÑÑ‚Ð¾ Ð½Ðµ ÐºÐ¾Ð½ÐµÑ† Ð²ÑÐµÐ³Ð¾ ÑÐ¿Ð¸ÑÐºÐ°
          if (hasNextItem || i < item.prepayments.length - 1) {
            blocks.push({ text: '', margin: [0, 0, 0, this.converPx(12)] });
          }
        }
      }
    }
  });

  return { stack: blocks };
},
