} else {
  // === ПЛАТЁЖ + ДОСРОЧНЫЕ ===
  blocks.push(this.createStandardPaymentBlock(item));

  if (item.prepayments && item.prepayments.length > 0) {
    // Рисуем все досрочные
    for (let i = 0; i < item.prepayments.length; i++) {
      const product = item.prepayments[i];
      if (String(product.amount).toLowerCase().includes('e')) continue;

      blocks.push(this.createEarlyRepaymentBlock(product));

      // Определяем: это последнее досрочное в этом item?
      const isLastEarlyInItem = (i === item.prepayments.length - 1);

      if (hasNextItem && isLastEarlyInItem) {
        const nextItem = this.shedule[index + 1];

        // Явные проверки БЕЗ ?. 
        const nextIsEarlyRepayment = nextItem && nextItem.prepayments && nextItem.prepayments.length > 0;
        const nextIsHoliday = nextItem && nextItem.isHoliday === true; // ← === true, а не просто truthy

        if (nextIsEarlyRepayment || nextIsHoliday) {
          // Следующий блок — особый → отступ 12px
          blocks.push({ text: '', margin: [0, 0, 0, this.converPx(12)] });
        } else {
          // Следующий блок — обычный платёж → линия с отступами 12px/12px
          blocks.push({
            canvas: [
              {
                type: 'line',
                x1: this.converPx(16),
                y1: 0,
                x2: 515 - this.converPx(16) - this.converPx(16),
                y2: 0,
                lineWidth: 1,
                lineColor: '#f4f4f4'
              }
            ],
            margin: [0, this.converPx(12), 0, this.converPx(12)]
          });
        }
      } else if (!isLastEarlyInItem) {
        // Не последнее досрочное → просто отступ (как было)
        blocks.push({ text: '', margin: [0, 0, 0, this.converPx(12)] });
      }
      // Если !hasNextItem и isLastEarlyInItem — ничего не добавляем (конец графика)
    }
  }
}
